<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Ares分数系统</title>
    <!--table-->
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/jquery.dataTables.min.css">
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.1.3/css/bootstrap.css">
    <script type="text/javascript" charset="utf8" src="https://code.jquery.com/jquery-3.3.1.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/buttons/1.6.0/js/dataTables.buttons.min.js"></script>
    <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/rowgroup/1.1.1/js/dataTables.rowGroup.min.js"></script>
    <!--wowhead-->
    <script>var whTooltips = {colorLinks: true, iconizeLinks: true, renameLinks: true};</script>
    <script src="https://wow.zamimg.com/widgets/power.js"></script>
    <style>
               .HUNTER {
            background-color: #aad372!important;
        }
                .WARRIOR {
            background-color: #c69b6d!important;
        }
                .ROGUE {
            background-color: #fff468!important;
        }
                .MAGE {
            background-color: #3fc6ea!important;
        }
                .PRIEST {
            background-color: #ffffff!important;
        }
                .WARLOCK {
            background-color: #8787ed!important;
        }
                .DRUID {
            background-color: #ff7c0a!important;
        }
                .PALADIN {
            background-color: #f48cba!important;
        }
                .SHAMAN {
            background-color: #0270dd!important;
        }
                .tab {
            overflow: hidden;
            border: 1px solid #ccc;
            background-color: #f1f1f1;
        }
      
        /* Style the buttons that are used to open the tab content */
        .tab button {
            background-color: inherit;
            float: left;
            border: none;
            outline: none;
            cursor: pointer;
            padding: 14px 16px;
            transition: 0.3s;
        }

        /* Change background color of buttons on hover */
        .tab button:hover {
            background-color: #ddd;
        }

        /* Create an active/current tablink class */
        .tab button.active {
            background-color: #ccc;
        }

        /* Style the tab content */
        .tabcontent {
            display: none;
            padding: 6px 12px;
            border: 1px solid #ccc;
            border-top: none;
        }
    </style>
</head>
<body>
<div class="container">
  <H1>Ares公会活动分数</H1>
  <div class="tab">
    <button class="tablinks" onclick="selectTab(event, 'EpgpTab')">EPGP</button>
    <button class="tablinks" onclick="selectTab(event, 'EpgpLogsTab')">EPGP拾取记录</button>
    <button class="tablinks" onclick="selectTab(event, 'EpgpLogsTab1')">EPGP奖励记录</button>
    <button class="tablinks" onclick="selectTab(event, 'DkpTab')">DKP</button>
    <button class="tablinks" onclick="selectTab(event, 'dkpLogsTab')">DKP拾取记录</button>
    <button class="tablinks" onclick="selectTab(event, 'dkpLogsTab1')">DKP奖励记录</button>
  </div>
  <div id="EpgpTab" class="tabcontent">
    <table id="epgpTable" class="display" style="width:100%">
      <thead>
        <tr>
            <th>名字</th>
            <th>职业</th>
            <th>EP</th>
            <th>GP</th>
            <th>PR</th>
        </tr>
      </thead>                 
      <tfoot>
        <tr>
            <th>名字</th>
            <th>职业</th>
            <th>EP</th>
            <th>GP</th>
            <th>PR</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="EpgpLogsTab" class="tabcontent">
    <table id="EpgplogsTable" class="display" style="width:100%">
      <thead>
        <tr>
            <th>时间</th>
            <th>名字</th>
            <th>职业</th>
            <th>物品GP</th>
            <th>装备</th>
        </tr>
      </thead>                           
      <tfoot>
        <tr>
          <th>时间</th>
          <th>名字</th>
          <th>职业</th>
          <th>物品GP</th>
          <th>装备</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="DkpTab" class="tabcontent">
    <table id="dkpTable" class="display" style="width:100%">
      <thead>
        <tr>
            <th>名字</th>
            <th>职业</th>
            <th>DKP</th>
        </tr>
      </thead>                           
      <tfoot>
        <tr>
          <th>名字</th>
          <th>职业</th>
          <th>DKP</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="dkpLogsTab" class="tabcontent">
    <table id="dkplogsTable" class="display" style="width:100%">
      <thead>
        <tr>
            <th>时间</th>
            <th>名字</th>
            <th>职业</th>
            <th>物品GP</th>
            <th>装备</th>
        </tr>
      </thead>                           
      <tfoot>
        <tr>
          <th>时间</th>
          <th>名字</th>
          <th>职业</th>
          <th>物品GP</th>
          <th>装备</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="EpgpLogsTab1" class="tabcontent">
    <table id="epgplogsTable1" class="display" style="width:100%">
      <thead>
        <tr>
            <th>奖励原因</th>
            <th>ep</th>
            <th>玩家数</th>
            <th>时间</th>
        </tr>
      </thead>                           
      <tfoot>
        <tr>
          <th>奖励原因</th>
          <th>ep</th>
          <th>玩家数</th>
          <th>时间</th>
        </tr>
      </tfoot>
    </table>
  </div>
  <div id="dkpLogsTab1" class="tabcontent">
    <table id="dkplogsTable1" class="display" style="width:100%">
      <thead>
        <tr>
          <th>奖励原因</th>
          <th>dkp</th>
          <th>玩家数</th>
          <th>时间</th>
        </tr>
      </thead>                           
      <tfoot>
        <tr>
          <th>奖励原因</th>
          <th>dkp</th>
          <th>玩家数</th>
          <th>时间</th>
        </tr>
      </tfoot>
    </table>
  </div>
</div>
<script>
    function selectTab(event, name) {
        var i, tabcontent, tablinks;
        // Get all elements with class="tabcontent" and hide them
        tabcontent = document.getElementsByClassName("tabcontent");
        for (i = 0; i < tabcontent.length; i++) {
            tabcontent[i].style.display = "none";
        }
        tablinks = document.getElementsByClassName("tablinks");
        for (i = 0; i < tablinks.length; i++) {
            tablinks[i].className = tablinks[i].className.replace(" active", "");
        }
        document.getElementById(name).style.display = "block";
        if (event) {
            event.currentTarget.className += " active";
        }
    }

    function refreshLink(){
        if(typeof $WowheadPower == 'undefined'){
            $.getScript('//wow.zamimg.com/widgets/power.js');
        } else {
            $WowheadPower.refreshLinks();
        }
    }


    $(document).ready(function () {
        var epgpTable = $('#epgpTable').DataTable({
            pageLength: 50,
            order: [ [ 0, 'asc' ] ],
            "ajax": "epgp",
            "columns":[
              {data:"name"},
              {data:"class"},
              {data:"ep"},
              {data:"gp"},
              {data:""}
            ],
            "columnDefs":[
              {
                "render":function (data,type,row){
                  return (parseInt(row['ep'])/(parseInt(row['gp'])+300)).toFixed(3)
                },
                "targets":4
              },
              {
                "render":function (data,type,row){
                  return "<a href=\"PlayerDetail\\?" + row['name'] + "\" style=\"color: black\">" + row["name"] +"</a>"
                },
                "targets":0
              },
              {
                "render":function (data,type,row){
                  if (row['class'] == "DRUID"){
                    return "德鲁伊"
                  }
                  else if (row['class'] == "HUNTER"){
                    return "猎人"
                  }
                  else if (row['class'] == "WARRIOR"){
                    return "战士"
                  }
                  else if (row['class'] == "ROGUE"){
                    return "盗贼"
                  }
                  else if (row['class'] == "MAGE"){
                    return "法师"
                  }
                  else if (row['class'] == "PRIEST"){
                    return "牧师"
                  }
                  else if (row['class'] == "WARLOCK"){
                    return "术士"
                  }
                  else if (row['class'] == "PALADIN"){
                    return "圣骑士"
                  }                  
                },
                "targets":1
              }
            ],
            //每行回调函数  
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) { 
			                		//动态设置class属性
                          $('td:eq(0)',nRow).attr("class",aData['class']);
			                },
        });
        var epgplogsTable = $('#EpgplogsTable').DataTable({
            pageLength: 50,
            order: [ [ 0, 'desc' ] ],
            "ajax": "epgplog",
            "columns":[
              {data:"time"},
              {data:"name"},
              {data:"class"},
              {data:"gp"},
              {data:""}
            ],
            "columnDefs":[
              {
                "render":function (data,type,row){
                  return '<a href="https://cn.classic.wowhead.com/item=' + row["item"] + '/" class="icontinyl q4" data-wh-icon-added="true" ><span></span></a>'
                },
                "targets":4
              },
              {
                "render":function (data,type,row){
                  if (row['class'] == "DRUID"){
                    return "德鲁伊"
                  }
                  else if (row['class'] == "HUNTER"){
                    return "猎人"
                  }
                  else if (row['class'] == "WARRIOR"){
                    return "战士"
                  }
                  else if (row['class'] == "ROGUE"){
                    return "盗贼"
                  }
                  else if (row['class'] == "MAGE"){
                    return "法师"
                  }
                  else if (row['class'] == "PRIEST"){
                    return "牧师"
                  }
                  else if (row['class'] == "WARLOCK"){
                    return "术士"
                  }
                  else if (row['class'] == "PALADIN"){
                    return "圣骑士"
                  }                  
                },
                "targets":2
              }
            ],
            //每行回调函数  
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) { 
			                		//动态设置class属性
			                		$('td:eq(1)',nRow).attr("class",aData['class'])
			                },
        });
        var dkpTable = $('#dkpTable').DataTable({
            pageLength: 50,
            order: [ [ 0, 'asc' ] ],
            "ajax": "dkp",
            "columns":[
              {data:"name"},
              {data:"class"},
              {data:"dkp"},
            ],
            "columnDefs":[
              {
                "render":function (data,type,row){
                  if (row['class'] == "DRUID"){
                    return "德鲁伊"
                  }
                  else if (row['class'] == "HUNTER"){
                    return "猎人"
                  }
                  else if (row['class'] == "WARRIOR"){
                    return "战士"
                  }
                  else if (row['class'] == "ROGUE"){
                    return "盗贼"
                  }
                  else if (row['class'] == "MAGE"){
                    return "法师"
                  }
                  else if (row['class'] == "PRIEST"){
                    return "牧师"
                  }
                  else if (row['class'] == "WARLOCK"){
                    return "术士"
                  }
                  else if (row['class'] == "PALADIN"){
                    return "圣骑士"
                  }                  
                },
                "targets":1
              },
              {
                "render":function (data,type,row){
                  return "<a href=\"PlayerDetail\\?" + row['name'] + "\" style=\"color: black\">" + row["name"] +"</a>"
                },
                "targets":0
              },
            ],
            //每行回调函数  
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) { 
			                		//动态设置class属性
			                		$('td:eq(0)',nRow).attr("class",aData['class'])
			                },
        });    

        var epgplogsTable1 = $('#epgplogsTable1').DataTable({
            pageLength: 50,
            order: [ [ 0, 'desc' ] ],
            "ajax": "epgplog1",
            "columns":[
              {data:"name"},
              {data:"ep"},
              {data:"player"},
              {data:"time"},
            ],    
            "columnDefs":[
              {
                "render":function (data,type,row){
                  return "<a href=\"kill\\?" + row['id'] + "\" style=\"color: black\">" + row["name"] +"</a>"
                },
                "targets":0
              },
            ],        
        });

        var dkplogsTable1 = $('#dkplogsTable1').DataTable({
            pageLength: 50,
            order: [ [ 0, 'desc' ] ],
            "ajax": "dkplog1",
            "columns":[
              {data:"name"},
              {data:"dkp"},
              {data:"player"},
              {data:"time"},
            ],    
            "columnDefs":[
              {
                "render":function (data,type,row){
                  return "<a href=\"kill\\?" + row['id'] + "\" style=\"color: black\">" + row["name"] +"</a>"
                },
                "targets":0
              },
            ],        
        }); 

        var dkplogsTable = $('#dkplogsTable').DataTable({
            pageLength: 50,
            order: [ [ 0, 'desc' ] ],
            "ajax": "dkplog",
            "columns":[
              {data:"time"},
              {data:"name"},
              {data:"class"},
              {data:"dkp"},
              {data:""}
            ],
            "columnDefs":[
              {
                "render":function (data,type,row){
                  return '<a href="https://cn.classic.wowhead.com/item=' + row["item"] + '/" class="icontinyl q4" data-wh-icon-added="true" ><span></span></a>'
                },
                "targets":4
              },
              {
                "render":function (data,type,row){
                  if (row['class'] == "DRUID"){
                    return "德鲁伊"
                  }
                  else if (row['class'] == "HUNTER"){
                    return "猎人"
                  }
                  else if (row['class'] == "WARRIOR"){
                    return "战士"
                  }
                  else if (row['class'] == "ROGUE"){
                    return "盗贼"
                  }
                  else if (row['class'] == "MAGE"){
                    return "法师"
                  }
                  else if (row['class'] == "PRIEST"){
                    return "牧师"
                  }
                  else if (row['class'] == "WARLOCK"){
                    return "术士"
                  }
                  else if (row['class'] == "PALADIN"){
                    return "圣骑士"
                  }                  
                },
                "targets":2
              }
            ],
            //每行回调函数  
            "fnRowCallback": function( nRow, aData, iDisplayIndex, iDisplayIndexFull ) { 
			                		//动态设置class属性
			                		$('td:eq(1)',nRow).attr("class",aData['class'])
			                },
        });      
        epgplogsTable.on( 'draw', function () {
            refreshLink();
        } );

        dkplogsTable.on( 'draw', function () {
            refreshLink();
        } );

      selectTab(null, "EpgpTab")
    });
</script>
</body>
</html>
